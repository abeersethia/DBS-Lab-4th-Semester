CREATE TABLE EMP(
  EMPCODE NUMBER(3) CONSTRAINT PK_EMPNO PRIMARY KEY,
  NAME VARCHAR2(10),
  QUALIFICATION VARCHAR2(7) CONSTRAINT VALID_QUALIF CHECK(QUALIFICATION IN ('BTECH','MTECH','MSC','MCA','PHD')),
  PHONE NUMBER(10),
  EMAIL VARCHAR2(20) CONSTRAINT EMAIL_DOMAIN CHECK(EMAIL LIKE '%@digisol.com'),
  DESIGNATION VARCHAR2(20) CONSTRAINT VALID_DESIGNATION CHECK(DESIGNATION IN ('PROJECT MANAGER','DEVELOPER','PROJECT LEADER','TECHNICAL HEAD','PROJECT DIRECTOR','CEO')),
  SALARY NUMBER(7) CONSTRAINT SALARY_RANGE CHECK(SALARY BETWEEN 97000 AND 300000));

CREATE TABLE SKILL(
  SKILLID CHAR(3) CONSTRAINT UNQ_SKILLID UNIQUE,
  SKILLNAME VARCHAR(20) CONSTRAINT UNQ_SKILLNAME UNIQUE
);
 CREATE TABLE EMP_SKILL (
  2    EMPNO NUMBER(3) CONSTRAINT FK_EMPNO REFERENCES EMP,
  3    SKILLID CHAR(3) CONSTRAINT FK_SKILLID REFERENCES SKILL(SKILLID) ON DELETE CASCADE,
  4    SKILL_EXPERIENCE NUMBER(3) CHECK (SKILL_EXPERIENCE > 0)
  5  );

CREATE TABLE PRJ_DETAILS (
  2    PRJID CHAR(3) PRIMARY KEY CONSTRAINT PK_PRJID CHECK(PRJID LIKE 'P%'),
  3    PRJ_NAME VARCHAR2(10),
  4    START_DATE DATE,
  5    END_DATE DATE,
  6    ACTUAL_END_DATE DATE,
  7    LEAD_BY_EMPCODE NUMBER(3) CONSTRAINT FK_LEAD_EMP REFERENCES EMP,
  8  CONSTRAINT END_DATE_GARTER_START_DATE CHECK(END_DATE>START_DATE),
  9  CONSTRAINT ACT_END_DATE_GT_END_DATE CHECK(ACTUAL_END_DATE>=END_DATE)
 10  );

CREATE TABLE WORK_EXP (
EMPCODE NUMBER(3) REFERENCES EMP,
PRJID CHAR(3) REFERENCES PRJ_DETAILS,
WORK_EXPERIENCE NUMBER(3) NOT NULL CHECK(WORK_EXPERIENCE>=0),
CLIENTID CHAR(3) REFERENCES CLIENT ON DELETE SET NULL,
RATING VARCHAR(3) CHECK (RATING IN('A','B','C')),
PRIMARY KEY(EMPCODE,PRJID));

CREATE TABLE CLIENT (
CLIENTID CHAR(3) CONSTRAINT PK_CLIENTID PRIMARY KEY CONSTRAINT STARTSWITH_C CHECK(CLIENTID LIKE 'C%'),
NAME VARCHAR2(10),
PHONE CHAR(14) CONSTRAINT PHONE_FORMAT CHECK (PHONE IN ('+91-__________','+81-__________','+31-__________','+48-__________','+44-__________'));

CREATE TABLE FAMILY_DEPENDENTS(
EMPNO NUMBER(3) REFERENCES EMP,
DEP_NAME VARCHAR(20),
RELATIONSHIP VARCHAR(16),
AGE NUMBER(3) CONSTRAINT VALID_AGE CHECK(AGE BETWEEN 1 AND 130),
PRIMARY KEY (EMPNO,DEP_NAME));

CREATE TABLE MEDICAL_POLICY(
EMPNO NUMBER(3) REFERENCES EMP,
POLICYNO VARCHAR2(6) CHECK(POLICYNO LIKE 'MED%'),
PREMIUM NUMBER(5) CHECK(PREMIUM>0),
POLICYDATE DATE,
PRIMARY KEY (EMPNO,POLICYNO));

CREATE TABLE PAY_CHECK(
EMPCODE NUMBER(3) REFERENCES EMP,
PAY_DATE DATE,
REGULAR_INCREMENT NUMBER(4) CONSTRAINT VALID_REGU_INCENTIVE CHECK(REGULAR_INCREMENT IN(2000,3000,5000,7000,9000)),
PERFORMANCE_INCENTIVE NUMBER(5),
DA NUMBER(7),
PF NUMBER(6),
OTHER_INCENTIVES NUMBER(4),
ADVANCE_TAX NUMBER(5),
PRIMARY KEY(EMPCODE,PAY_DATE));

SQL> ALTER TABLE PRJ_DETAILS
  2  ADD BUDGET_ALLOCATED NUMBER(10,1);

Table altered.

SQL> ALTER TABLE PRJ_DETAILS
  2  ADD ACTUAL_BUDGET NUMBER(10,1);

